<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A-1 Plumbing Quote Request</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Anton&display=swap" rel="stylesheet">
</head>
<body>
  <div class="form-container">
    <div class="brand-header vertical">
      <img src="logo.png" alt="A-1 Logo" />
      <h1 contenteditable="true">A-1 AFFORDABLE PLUMBING SERVICES</h1>
    </div>
    <h2>Request a Plumbing Quote</h2>
    <form enctype="multipart/form-data" method="POST" action="#">
      <label>Full Name:<input type="text" name="name" required></label>
      <label>Address:<input type="text" name="address" required></label>
      <label>Phone Number:<input type="tel" name="phone" required></label>
      <label>Email Address:<input type="email" name="email" required></label>

      <label>Property Type:
        <select name="property_type" required>
          <option value="">Select</option>
          <option value="residential">Residential</option>
          <option value="commercial">Commercial</option>
        </select>
      </label>

      <fieldset>
        <legend>Type of Issue (check all that apply):</legend>
        <label><input type="checkbox" name="issue[]" value="Leak"> Leak</label>
        <label><input type="checkbox" name="issue[]" value="Clog"> Clog</label>
        <label><input type="checkbox" name="issue[]" value="Water Heater"> Water Heater</label>
        <label><input type="checkbox" name="issue[]" value="Toilet"> Toilet</label>
        <label><input type="checkbox" name="issue[]" value="Sewer Line"> Sewer Line</label>
        <label><input type="checkbox" name="issue[]" value="Other"> Other</label>
      </fieldset>

      <label>Describe the Problem:<textarea name="problem_description" rows="4" required></textarea></label>
      <label>When did the problem start?<input type="text" name="start_date"></label>
      <label>Upload Photos:<input type="file" name="photos" multiple></label>
      <label>Upload Video:<input type="file" name="video"></label>
      <label>Access Notes:<textarea name="access_notes" rows="2"></textarea></label>
      <label>Best time to contact or schedule:<input type="text" name="best_time"></label>

      <button type="submit">Submit Request</button>
    </form>
  </div>
<!-- Firebase App (core) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>

<!-- Firestore -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>

  const firebaseConfig = {
    apiKey: "AIzaSyCZF03KFNUK_TqG5_dU2d0oaR1XuzcES4",
    authDomain: "a1apsvc-plumbing-workspace.firebaseapp.com",
    projectId: "a1apsvc-plumbing-workspace",
    storageBucket: "a1apsvc-plumbing-workspace.appspot.com",
    messagingSenderId: "752317638867",
    appId: "1:752317638867:web:c4af700064698bb7d4d26c",
    measurementId: "G-H8DZKBNENH"
  };

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

  window.submitQuote = async function (event) {
    event.preventDefault();

    const name = document.querySelector("#name").value;
    const address = document.querySelector("#address").value;
    const email = document.querySelector("#email").value;
    const phone = document.querySelector("#phone").value;
    const description = document.querySelector("#description").value;

    const quote = {
      name,
      address,
      email,
      phone,
      description,
      submittedAt: new Date()
    };

    try {
      await addDoc(collection(db, "quotes"), quote);
      alert("✅ Quote submitted successfully!");
    } catch (e) {
      console.error("Error saving to Firestore:", e);
      alert("❌ Error submitting quote. See console for details.");
    }
  };
</script>

</body>
</html>
